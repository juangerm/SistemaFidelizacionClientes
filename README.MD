# Proyecto OpenXava â€” Sistema de GestiÃ³n

## DescripciÃ³n

Sistema de gestiÃ³n de puntos y canjes desarrollado con **OpenXava**, **Java** y **PostgreSQL**.  
Permite administrar clientes, bolsas de puntos, conceptos de canje y reglas de asignaciÃ³n.
Incluye API REST para consumo externo y scripts SQL con triggers y funciones de negocio.


---

## Requisitos previos

AsegÃºrate de tener instalados:

| Herramienta | VersiÃ³n recomendada | Comando para verificar |
|--------------|---------------------|-------------------------|
| Java JDK     | 11 / 17 / 21        | `java -version`         |
| Apache Maven | â‰¥ 3.8.x             | `mvn -version`          |
| PostgreSQL   | â‰¥ 14.x              | `psql --version`        |


> El proyecto fue probado con OpenXava **7.5.3** y Java **17**.

---

## Estructura del proyecto

openxava-app/
â”œâ”€â”€ pom.xml # ConfiguraciÃ³n Maven + dependencias OpenXava
â”œâ”€â”€ src/
â”‚ â”œâ”€â”€ main/
â”‚ â”‚ â”œâ”€â”€ java/ # Entidades, controladores y lÃ³gica de negocio
â”‚ â”‚ â”œâ”€â”€ resources/ # i18n, persistence.xml, configs
â”‚ â”‚ â””â”€â”€ webapp/ # vistas, recursos estÃ¡ticos, etc.
â”‚ â””â”€â”€ test/ # pruebas unitarias
â”œâ”€â”€ db/
â”‚ â”œâ”€â”€ migration/ # scripts SQL de creaciÃ³n de tablas (DDL)
â”‚ â””â”€â”€ seed/ # datos de ejemplo (opcional)
â”œâ”€â”€ .gitignore
â””â”€â”€ README.md
---

## ConfiguraciÃ³n de base de datos

El archivo `src/main/resources/META-INF/persistence.xml` define la conexiÃ³n a PostgreSQL.  
Utiliza **placeholders** para evitar subir credenciales reales:

```xml
	<property name="hibernate.connection.url" value="jdbc:postgresql://localhost:5432/sifidb"/>
	<property name="hibernate.connection.username" value="postgres"/>
	<property name="hibernate.connection.password" value="12345"/>

## EjecuciÃ³n local

1. Clona el repositorio:
   ```bash
   git clone https://github.com/juangerm/SistemaFidelizacionClientes.git
   cd sifi-openxava

2. Compilar y ejecutar con Maven:
   ```bash
	mvn clean package
	mvn openxava:run

Abre tu navegador en
http://localhost:8080/sifi

Si se utiliza otra BD, ajustar el persistence.xml antes de ejecutar.

---

#### Referencia rÃ¡pida a los scripts SQL

```markdown
## InicializaciÃ³n de base de datos

En la carpeta `/db` se incluyen los scripts:

| Archivo | DescripciÃ³n |
|----------|-------------|
| `sifi_db_init.sql` | Estructura completa (tablas, funciones, triggers). |
| `sifi_seed.sql` | Datos mÃ­nimos de prueba: clientes, reglas, vencimientos, bolsas y canje ejemplo. |

#### API REST de referencia (si ya lo expusiste)

```markdown
## Endpoints principales (REST)

| Recurso | MÃ©todo | DescripciÃ³n |
|----------|--------|--------------|
| `/api/clientes` | GET / POST / PUT / DELETE | CRUD de clientes |
| `/api/bolsas` | GET / POST / PUT / DELETE | GestiÃ³n de bolsas de puntos |
| `/api/canjes` | GET / POST / DELETE | Registro y reversiÃ³n de canjes |

> Los endpoints estÃ¡n documentados tambiÃ©n en `SIFI Puntos API.postman_collection.json`

---

## ğŸ‘¨â€ğŸ’» Autores
**Cesar Rodrigo CabaÃ±as**  
**Juan Gerardo Benitez Romero**  
**NicolÃ¡s Ayala Pizurno**  


## Licencia
Este proyecto se distribuye bajo licencia **MIT**.

